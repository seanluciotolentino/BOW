<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header" id="index-top" name="#top">All of these people were killed by the police...</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
	        <div class="btn btn-primary centered" id="index-subnav">
	        	See the Map
	        </div>
        </div>
    </div>
    <!-- Gallery of cases -->
    <div class="row">	
	    <div id='front-gallery'>
	        <% @articles.each do |article| %>
		        <div class="col-lg-2 col-md-4 col-xs-2">					
		            <div class="thumbnail" >
			            <div class="imageWrapper galleryImage">
				            <% if article.video_url? &&  article.video_url != '' %>
										  <%= link_to image_tag('video-icon-small.png', :class => "video_icon"), article %>
										<% end %>	            		
				            <% if article.avatar? %>
				              <%= link_to image_tag(article.avatar.large_avatar, :class => "img-responsive", data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "#{article.date.strftime("%m/%d/%Y")} - #{article.title} ", :content => "#{truncate(article.popover_content, length:200)}"}), article %>
				            <% else %>
				              <%= link_to image_tag('default-user-icon.png', :class => "img-responsive", size: 250, data: {:toggle => 'popover', :container => 'body', :trigger => 'hover',:placement => "bottom", :title => "#{article.date.strftime("%m/%d/%Y")} - #{article.title} ", :content => "#{truncate(article.popover_content, length:200)}"}), article %>
									  <% end %>
			            </div>

			        </div>
			    </div>
	        <% end %>
	    </div>
    </div>
    <%= paginate @articles %>
    <p><%= page_entries_info @articles %></p>
    <!-- End Gallery -->
    <div class="row">
        <div class="col-lg-12 map-subnav">
	        <div class="btn btn-primary centered" id="map-subnav">
	        	Back to the top
	        </div>
        </div>
    </div>
    <!-- Map -->
    <div class="row">
	    <div class="col-lg-12 articleMap">
			  <div id='map' name='map'></div>	
	    </div>
	</div>
    <!-- End Map -->
</div>
<script type="">
	handler = Gmaps.build('Google');
	handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
	  markers = handler.addMarkers(<%=raw @hash.to_json %>);
	  handler.bounds.extendWith(markers);
	  handler.fitMapToBounds();
	});
</script>
<script type="text/javascript">
	$(document).ready(function (){
      $("#map-subnav").click(function (){
        //$(this).animate(function(){
        $('html, body').animate({
            scrollTop: $("#index-top").offset().top
        }, 800);
        //});
      });
      $("#index-subnav").click(function (){
        //$(this).animate(function(){
        $('html, body').animate({
            scrollTop: $("#map-subnav").offset().top
        }, 800);
        //});
      });
  });
</script>
